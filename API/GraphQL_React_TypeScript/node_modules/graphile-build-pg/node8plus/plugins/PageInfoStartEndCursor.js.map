{"version":3,"sources":["../../src/plugins/PageInfoStartEndCursor.js"],"names":["PageInfoStartEndCursor","builder","hook","fields","build","context","extend","getTypeByName","inflection","Self","fieldWithHooks","name","builtin","Cursor","startCursor","addDataGenerator","usesCursor","description","wrapDescription","type","isPageInfoStartCursorField","endCursor"],"mappings":";;;;;;;IAGyBA,sB,GAAT,SAASA,sBAAT,CAAgCC,OAAhC,EAAyC;AACvDA,EAAAA,OAAO,CAACC,IAAR,CACE,0BADF,EAEE,CAACC,MAAD,EAASC,KAAT,EAAgBC,OAAhB,KAA4B;AAC1B,UAAM;AAAEC,MAAAA,MAAF;AAAUC,MAAAA,aAAV;AAAyBC,MAAAA;AAAzB,QAAwCJ,KAA9C;AACA,UAAM;AAAEK,MAAAA,IAAF;AAAQC,MAAAA;AAAR,QAA2BL,OAAjC;;AACA,QAAII,IAAI,CAACE,IAAL,KAAcH,UAAU,CAACI,OAAX,CAAmB,UAAnB,CAAlB,EAAkD;AAChD,aAAOT,MAAP;AACD;;AACD,UAAMU,MAAM,GAAGN,aAAa,CAAC,QAAD,CAA5B;AACA,WAAOD,MAAM,CACXH,MADW,EAEX;AACEW,MAAAA,WAAW,EAAEJ,cAAc,CACzB,aADyB,EAEzB,CAAC;AAAEK,QAAAA;AAAF,OAAD,KAA0B;AACxBA,QAAAA,gBAAgB,CAAC,OAAO;AAAEC,UAAAA,UAAU,EAAE,CAAC,IAAD;AAAd,SAAP,CAAD,CAAhB;AACA,eAAO;AACLC,UAAAA,WAAW,EAAEb,KAAK,CAACc,eAAN,CACX,oDADW,EAEX,OAFW,CADR;AAKLC,UAAAA,IAAI,EAAEN;AALD,SAAP;AAOD,OAXwB,EAYzB;AACEO,QAAAA,0BAA0B,EAAE;AAD9B,OAZyB,CAD7B;AAiBEC,MAAAA,SAAS,EAAEX,cAAc,CACvB,WADuB,EAEvB,CAAC;AAAEK,QAAAA;AAAF,OAAD,KAA0B;AACxBA,QAAAA,gBAAgB,CAAC,OAAO;AAAEC,UAAAA,UAAU,EAAE,CAAC,IAAD;AAAd,SAAP,CAAD,CAAhB;AACA,eAAO;AACLC,UAAAA,WAAW,EAAEb,KAAK,CAACc,eAAN,CACX,mDADW,EAEX,OAFW,CADR;AAKLC,UAAAA,IAAI,EAAEN;AALD,SAAP;AAOD,OAXsB,EAYvB;AACEO,QAAAA,0BAA0B,EAAE;AAD9B,OAZuB;AAjB3B,KAFW,EAoCV,mCAAkCX,IAAI,CAACE,IAAK,EApClC,CAAb;AAsCD,GA/CH,EAgDE,CAAC,wBAAD,CAhDF,EAiDE,EAjDF,EAkDE,CAAC,QAAD,CAlDF;AAoDD,C","sourcesContent":["// @flow\nimport type { Plugin } from \"graphile-build\";\n\nexport default (function PageInfoStartEndCursor(builder) {\n  builder.hook(\n    \"GraphQLObjectType:fields\",\n    (fields, build, context) => {\n      const { extend, getTypeByName, inflection } = build;\n      const { Self, fieldWithHooks } = context;\n      if (Self.name !== inflection.builtin(\"PageInfo\")) {\n        return fields;\n      }\n      const Cursor = getTypeByName(\"Cursor\");\n      return extend(\n        fields,\n        {\n          startCursor: fieldWithHooks(\n            \"startCursor\",\n            ({ addDataGenerator }) => {\n              addDataGenerator(() => ({ usesCursor: [true] }));\n              return {\n                description: build.wrapDescription(\n                  \"When paginating backwards, the cursor to continue.\",\n                  \"field\"\n                ),\n                type: Cursor,\n              };\n            },\n            {\n              isPageInfoStartCursorField: true,\n            }\n          ),\n          endCursor: fieldWithHooks(\n            \"endCursor\",\n            ({ addDataGenerator }) => {\n              addDataGenerator(() => ({ usesCursor: [true] }));\n              return {\n                description: build.wrapDescription(\n                  \"When paginating forwards, the cursor to continue.\",\n                  \"field\"\n                ),\n                type: Cursor,\n              };\n            },\n            {\n              isPageInfoStartCursorField: true,\n            }\n          ),\n        },\n        `Adding startCursor/endCursor to ${Self.name}`\n      );\n    },\n    [\"PageInfoStartEndCursor\"],\n    [],\n    [\"Cursor\"]\n  );\n}: Plugin);\n"],"file":"PageInfoStartEndCursor.js"}