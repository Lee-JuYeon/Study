{"version":3,"sources":["../src/PgLiveProvider.js"],"names":["PgLiveProvider","LiveProvider","constructor","args","namespace","collectionIdentifierIsValid","collectionIdentifier","kind","recordIdentifierIsValid","recordIdentifier","Array","isArray","primaryKeyConstraint","length","keyAttributes"],"mappings":";;;;;;;AACA;;AAGe,MAAMA,cAAN,SAA6BC,2BAA7B,CAA0C;AACvD;AACAC,EAAAA,WAAW,CAAC,GAAGC,IAAJ,EAAiB;AAC1B,UAAM,GAAGA,IAAT;AACA,SAAKC,SAAL,GAAiB,IAAjB;AACD;;AAEDC,EAAAA,2BAA2B,CAACC,oBAAD,EAAgC;AACzD,WAAOA,oBAAoB,IAAIA,oBAAoB,CAACC,IAArB,KAA8B,OAA7D;AACD;;AAEDC,EAAAA,uBAAuB,CACrBF,oBADqB,EAErB;AACAG,EAAAA,gBAHqB,EAIrB;AACA,QAAI,CAACC,KAAK,CAACC,OAAN,CAAcF,gBAAd,CAAL,EAAsC,OAAO,KAAP;AACtC,QAAI,CAACH,oBAAoB,CAACM,oBAA1B,EAAgD,OAAO,KAAP;;AAChD,QACEH,gBAAgB,CAACI,MAAjB,KACAP,oBAAoB,CAACM,oBAArB,CAA0CE,aAA1C,CAAwDD,MAF1D,EAGE;AACA,aAAO,KAAP;AACD,KARD,CASA;;;AACA,WAAO,IAAP;AACD;;AA1BsD","sourcesContent":["// @flow\nimport { LiveProvider } from \"graphile-build\";\nimport type { PgClass } from \"./plugins/PgIntrospectionPlugin\";\n\nexport default class PgLiveProvider extends LiveProvider {\n  // eslint-disable-next-line flowtype/no-weak-types\n  constructor(...args: any[]) {\n    super(...args);\n    this.namespace = \"pg\";\n  }\n\n  collectionIdentifierIsValid(collectionIdentifier: PgClass) {\n    return collectionIdentifier && collectionIdentifier.kind === \"class\";\n  }\n\n  recordIdentifierIsValid(\n    collectionIdentifier: PgClass,\n    // eslint-disable-next-line flowtype/no-weak-types\n    recordIdentifier: Array<any>\n  ) {\n    if (!Array.isArray(recordIdentifier)) return false;\n    if (!collectionIdentifier.primaryKeyConstraint) return false;\n    if (\n      recordIdentifier.length !==\n      collectionIdentifier.primaryKeyConstraint.keyAttributes.length\n    ) {\n      return false;\n    }\n    // TODO: more validation would not go amiss\n    return true;\n  }\n}\n"],"file":"PgLiveProvider.js"}